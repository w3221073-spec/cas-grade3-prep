<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCAS Space Mission: Grade 3</title>
    <style>
        :root {
            --primary: #6C5CE7;
            --secondary: #00CEC9;
            --accent: #FAB1A0;
            --dark: #2D3436;
            --light: #DFE6E9;
            --success: #00b894;
            --error: #d63031;
            --timer-bg: #dfe6e9;
        }

        body {
            font-family: 'Verdana', sans-serif;
            background-color: #0c0c1e;
            color: white;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(white 1px, transparent 0);
            background-size: 40px 40px;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            width: 90%;
            max-width: 600px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        h1 { margin-bottom: 10px; color: var(--secondary); }
        
        /* Timer Styles */
        .timer-container {
            width: 100%;
            background-color: rgba(255,255,255,0.2);
            height: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            overflow: hidden;
            position: relative;
        }

        .timer-bar {
            height: 100%;
            background-color: var(--success);
            width: 100%;
            transition: width 1s linear, background-color 0.5s;
        }

        .timer-text {
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--secondary);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        #pause-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.1s;
        }
        #pause-btn:hover { transform: scale(1.05); }

        /* Pause Overlay */
        .pause-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(12, 12, 30, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            border-radius: 20px;
        }

        .pause-overlay h2 {
            color: var(--secondary);
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        #resume-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
        }
        #resume-btn:hover { transform: scale(1.05); }

        .question-card {
            background: white;
            color: var(--dark);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border: 4px solid var(--primary);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        button.option {
            background: var(--primary);
            border: none;
            padding: 15px;
            color: white;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.1s, background 0.2s;
            font-weight: bold;
        }

        button.option:hover { transform: scale(1.02); background: #5649c0; }
        button.option:active { transform: scale(0.98); }
        button.option:disabled { cursor: not-allowed; opacity: 0.7; }

        .feedback {
            margin-top: 15px;
            font-size: 1.1rem;
            min-height: 50px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .correct-anim { background-color: var(--success) !important; }
        .wrong-anim { background-color: var(--error) !important; }

        .hidden { display: none !important; }

        #restart-btn, #start-mission-btn {
            background: var(--secondary);
            color: var(--dark);
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s, transform 0.2s;
        }

        #restart-btn:hover, #start-mission-btn:hover {
            background: #00B1AD;
            transform: translateY(-2px);
        }

        /* Home Screen Styles */
        #home-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            animation: fadeIn 1s ease-in-out;
        }

        #home-screen h2 {
            color: var(--secondary);
            font-size: 2.5rem;
            margin-bottom: 1rem;
            animation: bounceIn 1.5s ease-out;
        }

        #home-screen p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .rocket {
            font-size: 5rem;
            animation: liftOff 2s ease-out infinite alternate;
            display: inline-block;
            margin-bottom: 1rem;
            color: var(--accent);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.5); opacity: 0; }
            60% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }

        @keyframes liftOff {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>

<div class="container">
    
    <div id="home-screen">
        <span class="rocket">üöÄ</span>
        <h2>Welcome, Space Cadet!</h2>
        <p>Your mission: Explore the cosmos of knowledge and conquer the MCAS challenges!</p>
        <button id="start-mission-btn">Start Mission</button>
    </div>

    <div id="quiz-container" class="hidden">
        <div class="status-bar">
            <span id="score-display">‚≠ê Score: 0</span>
            <span id="progress-display">Mission: 1/25</span>
            <button id="pause-btn" onclick="togglePause()">‚è∏Ô∏è Pause</button>
        </div>

        <div id="quiz-area">
            <div id="pause-screen" class="pause-overlay hidden">
                <h2>Mission Paused</h2>
                <p>Systems are in standby mode.</p>
                <button id="resume-btn" onclick="togglePause()">‚ñ∂ Resume Mission</button>
            </div>

            <div class="timer-text" id="timer-text">‚è±Ô∏è Oxygen Left: 60s</div>
            <div class="timer-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>

            <div class="question-card">
                <div id="question-text">Loading Mission Data...</div>
            </div>
            <div class="options-grid" id="options-container">
                </div>
            <div class="feedback" id="feedback-text"></div>
        </div>

        <div id="results-area" class="hidden">
            <h2>üöÄ Mission Complete!</h2>
            <p id="final-score" style="font-size: 1.5rem;"></p>
            <p id="message"></p>
            <button id="restart-btn" onclick="initGame()">Re-launch Mission</button>
        </div>
    </div>
</div>

<script>
    // MCAS Aligned Data (Math & ELA Mixed) with Hints
    const questions = [
        // --- ORIGINAL 5 ---
        {
            question: "Select the two fractions that are equivalent to 1/2.",
            options: ["2/4 and 3/6", "1/3 and 1/4", "2/3 and 4/6", "3/4 and 2/8"],
            correct: 0,
            hint: "Look for fractions where the top number is exactly half of the bottom number."
        },
        {
            question: "Solve: 7 √ó ? = 42",
            options: ["5", "6", "7", "8"],
            correct: 1,
            hint: "Skip count by 7s: 7, 14, 21, 28, 35..."
        },
        {
            question: "Which word is a noun in this sentence? 'The excited dog ran fast.'",
            options: ["Excited", "Ran", "Dog", "Fast"],
            correct: 2,
            hint: "A noun is a person, place, thing, or animal."
        },
        {
            question: "Round 438 to the nearest ten.",
            options: ["400", "430", "440", "500"],
            correct: 2,
            hint: "Look at the ones place (8). Is it 5 or higher? If yes, go up!"
        },
        {
            question: "Which shape is a quadrilateral?",
            options: ["Triangle", "Pentagon", "Rectangle", "Hexagon"],
            correct: 2,
            hint: "A quadrilateral has exactly four sides. 'Quad' means four."
        },
        // --- NEW MATH ---
        {
            question: "What is the perimeter of a square with side length 5 inches?",
            options: ["20 inches", "25 inches", "15 inches", "10 inches"],
            correct: 0,
            hint: "Perimeter is the distance AROUND the shape. Add all 4 sides (5+5+5+5)."
        },
        {
            question: "Which fraction is larger: 1/3 or 1/8?",
            options: ["1/8", "1/3", "They are equal", "Cannot tell"],
            correct: 1,
            hint: "Think of a pizza. Would you want 1 slice out of 3, or 1 slice out of 8?"
        },
        {
            question: "If you have 24 apples and put them into 4 equal bags, how many are in each bag?",
            options: ["4", "5", "6", "8"],
            correct: 2,
            hint: "This is division. What number times 4 equals 24?"
        },
        {
            question: "What time is it if the small hand is on 3 and the big hand is on 12?",
            options: ["3:30", "12:15", "12:03", "3:00"],
            correct: 3,
            hint: "When the big hand is on 12, it is 'o'clock'."
        },
        {
            question: "Calculate: 300 + 40 + 5",
            options: ["3405", "345", "3045", "354"],
            correct: 1,
            hint: "Put the numbers in their places: Hundreds, Tens, and Ones."
        },
        {
            question: "Which number makes this true: 8 √ó __ = 64",
            options: ["7", "9", "8", "6"],
            correct: 2,
            hint: "Think of the rhyme: 'I ate and I ate until I got sick on the floor, 8 times 8 is 64.'"
        },
        {
            question: "How many minutes are in one hour?",
            options: ["100", "30", "60", "45"],
            correct: 2,
            hint: "When the minute hand goes all the way around the clock, it counts 60 minutes."
        },
        {
            question: "Find the area of a rectangle with sides 4cm and 6cm.",
            options: ["10 sq cm", "24 sq cm", "12 sq cm", "20 sq cm"],
            correct: 1,
            hint: "Area = Length √ó Width."
        },
        {
            question: "Which equation shows the Distributive Property: 4 √ó 7 = ?",
            options: ["(4√ó5) + (4√ó2)", "4 + 7", "7 √ó 4", "(4√ó2) + (4√ó1)"],
            correct: 0,
            hint: "Break the 7 into two smaller numbers (5 and 2)."
        },
        {
            question: "Subtract: 500 - 243",
            options: ["257", "357", "267", "343"],
            correct: 0,
            hint: "You will need to regroup (borrow) from the hundreds place."
        },
        // --- NEW ELA ---
        {
            question: "Which word needs a capital letter? 'we are going to boston.'",
            options: ["we", "are", "going", "to"],
            correct: 0,
            hint: "Sentences always start with a capital letter."
        },
        {
            question: "Choose the correct plural for 'mouse'.",
            options: ["Mouses", "Mice", "Mice's", "Mouse's"],
            correct: 1,
            hint: "Mouse is an irregular noun. We don't just add 's'."
        },
        {
            question: "What is the main idea? 'Bats sleep in the day. They hunt at night.'",
            options: ["Bats like caves", "Bats are birds", "When bats sleep and hunt", "Bats are scary"],
            correct: 2,
            hint: "What are both sentences talking about? Sleeping and Hunting."
        },
        {
            question: "Which word is an adjective? 'The blue sky is pretty.'",
            options: ["Sky", "The", "Is", "Blue"],
            correct: 3,
            hint: "An adjective describes a noun. What color is the sky?"
        },
        {
            question: "What does 'impatient' mean?",
            options: ["Very patient", "Not patient", "Happy", "Sleeping"],
            correct: 1,
            hint: "The prefix 'im-' often means 'not'."
        },
        {
            question: "Select the correct spelling.",
            options: ["Beleive", "Believe", "Beleave", "Bileive"],
            correct: 1,
            hint: "Remember the rule: 'I before E, except after C'."
        },
        {
            question: "Which sentence has the correct punctuation?",
            options: ["Where are you going?", "Where are you going.", "Where are you going!", "Where, are you going?"],
            correct: 0,
            hint: "This sentence is asking a question."
        },
        {
            question: "What is the opposite of 'ancient'?",
            options: ["Old", "Modern", "Dusty", "Broken"],
            correct: 1,
            hint: "Ancient means very, very old. We need the opposite."
        },
        {
            question: "Which word connects these sentences? 'I like cake, ___ I don't like pie.'",
            options: ["And", "Or", "So", "But"],
            correct: 3,
            hint: "We use this word to show a contrast or difference."
        },
        {
            question: "Identify the verb: 'She whispered a secret.'",
            options: ["She", "Secret", "Whispered", "A"],
            correct: 2,
            hint: "A verb is an action word. What did she DO?"
        }
    ];

    let currentQ = 0;
    let score = 0;
    
    // Timer Variables
    let timeLeft = 60; // Seconds per question
    const MAX_TIME = 60;
    let timerInterval = null;
    let isPaused = false;

    // DOM Elements
    const homeScreen = document.getElementById('home-screen');
    const quizContainer = document.getElementById('quiz-container');
    const startMissionBtn = document.getElementById('start-mission-btn');
    const quizArea = document.getElementById('quiz-area');
    const resultsArea = document.getElementById('results-area');
    const scoreDisplay = document.getElementById('score-display');
    const progressDisplay = document.getElementById('progress-display');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const feedbackText = document.getElementById('feedback-text');
    const timerText = document.getElementById('timer-text');
    const timerBar = document.getElementById('timer-bar');
    const finalScore = document.getElementById('final-score');
    const message = document.getElementById('message');
    const pauseBtn = document.getElementById('pause-btn');
    const pauseScreen = document.getElementById('pause-screen');


    // Event Listeners
    startMissionBtn.addEventListener('click', startQuiz);

    function startQuiz() {
        homeScreen.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        initGame(); // Initialize the quiz game
    }

    function initGame() {
        currentQ = 0;
        score = 0;
        quizArea.classList.remove('hidden');
        resultsArea.classList.add('hidden');
        updateStats();
        loadQuestion();
    }

    // --- Timer Logic ---

    function togglePause() {
        isPaused = !isPaused;

        if (isPaused) {
            // Stop the clock, show overlay
            clearInterval(timerInterval);
            pauseScreen.classList.remove('hidden');
            pauseBtn.innerText = "‚ñ∂ Resume";
        } else {
            // Resume clock, hide overlay
            startCountdown(); // Resume using current timeLeft
            pauseScreen.classList.add('hidden');
            pauseBtn.innerText = "‚è∏Ô∏è Pause";
        }
    }

    function resetTimer() {
        clearInterval(timerInterval);
        timeLeft = MAX_TIME;
        isPaused = false;
        pauseScreen.classList.add('hidden');
        pauseBtn.innerText = "‚è∏Ô∏è Pause";
        pauseBtn.disabled = false;
        updateTimerVisuals();
        startCountdown();
    }

    function startCountdown() {
        clearInterval(timerInterval); // Safety clear
        timerInterval = setInterval(() => {
            timeLeft--;
            updateTimerVisuals();
            
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                handleTimeOut();
            }
        }, 1000);
    }

    function updateTimerVisuals() {
        // Update Text
        timerText.innerText = `‚è±Ô∏è Oxygen Left: ${timeLeft}s`;
        
        // Update Bar Width
        const percentage = (timeLeft / MAX_TIME) * 100;
        timerBar.style.width = `${percentage}%`;

        // Change Color based on urgency
        if (percentage > 50) {
            timerBar.style.backgroundColor = "#00b894"; // Green
        } else if (percentage > 20) {
            timerBar.style.backgroundColor = "#fdcb6e"; // Yellow
        } else {
            timerBar.style.backgroundColor = "#d63031"; // Red
        }
    }

    function handleTimeOut() {
        // Disable buttons
        const buttons = document.querySelectorAll('.option');
        buttons.forEach(b => b.disabled = true);
        pauseBtn.disabled = true; // Cannot pause when time is up
        
        // Show timeout msg
        feedbackText.innerText = "‚åõ Time's Up!";
        feedbackText.style.color = "#d63031";
        
        setTimeout(() => {
            nextQuestion();
        }, 2000);
    }

    // --- Quiz Logic ---

    function loadQuestion() {
        const q = questions[currentQ];
        questionText.innerText = q.question;
        feedbackText.innerText = "";
        
        optionsContainer.innerHTML = '';

        q.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, btn);
            optionsContainer.appendChild(btn);
        });

        resetTimer(); // Start fresh timer for new question
    }

    function checkAnswer(selected, btnElement) {
        clearInterval(timerInterval); // Stop timer immediately
        pauseBtn.disabled = true; // Disable pause during feedback

        // Disable all buttons
        const buttons = document.querySelectorAll('.option');
        buttons.forEach(b => b.disabled = true);

        if (selected === questions[currentQ].correct) {
            score++;
            btnElement.classList.add('correct-anim');
            feedbackText.innerText = "‚úÖ Correct! Great job!";
            feedbackText.style.color = "#00b894";
            
            setTimeout(nextQuestion, 1500);
        } else {
            btnElement.classList.add('wrong-anim');
            // SHOW HINT
            feedbackText.innerText = "üí° Hint: " + questions[currentQ].hint;
            feedbackText.style.color = "#fab1a0";
            
            // Wait 5 seconds so they can read hint, then next
            setTimeout(nextQuestion, 5000);
        }

        updateStats();
    }

    function nextQuestion() {
        currentQ++;
        if (currentQ < questions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function updateStats() {
        scoreDisplay.innerText = `‚≠ê Score: ${score}`;
        progressDisplay.innerText = `Mission: ${Math.min(currentQ + 1, questions.length)}/${questions.length}`;
    }

    function showResults() {
        clearInterval(timerInterval);
        quizArea.classList.add('hidden');
        resultsArea.classList.remove('hidden');
        pauseBtn.classList.add('hidden'); // Hide pause button on results
        finalScore.innerText = `You scored ${score} out of ${questions.length}`;
        
        const msg = score > (questions.length * 0.7) ? "üåü Astronaut Status: COMMANDER!" : "üëç Good practice! Ready for liftoff!";
        message.innerText = msg;
    }
</script>

</body>
</html>
